(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{235:function(e,a,s){"use strict";s.r(a);var t=s(0),n=Object(t.a)({},function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"npm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm","aria-hidden":"true"}},[e._v("#")]),e._v(" NPM")]),e._v(" "),s("h2",{attrs:{id:"package-json"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#package-json","aria-hidden":"true"}},[e._v("#")]),e._v(" package.json")]),e._v(" "),s("h3",{attrs:{id:"module-main"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-main","aria-hidden":"true"}},[e._v("#")]),e._v(" module & main")]),e._v(" "),s("p",[e._v("main指向此包被外部导入时的入口文件，cjs格式；module是esm格式的入口文件。")]),e._v(" "),s("h3",{attrs:{id:"scripts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scripts","aria-hidden":"true"}},[e._v("#")]),e._v(" scripts")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('scripts: {\n\t"test": "node bin/test.js --hot"\n}\n')])])]),s("p",[e._v("在包根目录可通过"),s("code",[e._v("npm run test")]),e._v("来快捷执行script中test指向的命令"),s("code",[e._v("node bin/test.js --hot")]),e._v("，在"),s("code",[e._v("test.js")]),e._v("中可用process.argvs读取到命令行参数"),s("code",[e._v("--hot")])]),e._v(" "),s("h2",{attrs:{id:"bin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bin","aria-hidden":"true"}},[e._v("#")]),e._v(" bin")]),e._v(" "),s("p",[e._v("一些npm包能以命令行的方式去运行，比如webpack、create-react-app等。")]),e._v(" "),s("p",[e._v("要使包能以命令行形式调用，需要配置package.json里的bin字段。")]),e._v(" "),s("p",[e._v("举个例子：")]),e._v(" "),s("p",[e._v("比如要创建一个叫my-bin的公共npm包，初始化my-bin项目，在项目中创建一个可执行文件"),s("code",[e._v("/bin/cli.js")]),e._v("，并在package.json中配置bin字段，发布到npm。")]),e._v(" "),s("blockquote",[s("p",[s("code",[e._v("cli.js")]),e._v("中的文件首行应加上"),s("code",[e._v("#!/usr/bin/env node")]),e._v("表示该脚本以node环境运行")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('// my-bin 的 package.json\nbin: {\n\t"my-bin": "bin/cli.js"\n}\n')])])]),s("p",[e._v("用户在自己项目执行"),s("code",[e._v("npm i my-bin")]),e._v("后，npm会将之前的"),s("code",[e._v("cli.js")]),e._v("复制到项目根目录下的"),s("code",[e._v("/node_module/.bin")]),e._v("，并重命名为"),s("code",[e._v("my-bin")]),e._v("；如果执行全局安装"),s("code",[e._v("npm i -g my-bin")]),e._v("，则会将其安装到全局的node目录下。")]),e._v(" "),s("p",[e._v("用户可以在项目根目录打开命令行手动调用")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ ./node_module/.bin/my-bin\n")])])]),s("p",[e._v("来执行my-bin，也可以写在package.json的script中来调用（script里不必写出my-bin的完整路径，因为"),s("code",[e._v("npm run test")]),e._v("时已经把"),s("code",[e._v("./node_module/.bin")]),e._v("添加到环境依赖了）")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('// 用户项目 的 package.json\nscripts: {\n\t"test": "my-bin"\n}\n')])])]),s("p",[e._v("如果是全局安装，node已经默认把全局目录下的bin写进环境依赖了，直接在命令行里")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ my-bin\n")])])]),s("p",[e._v("就能调用。")]),e._v(" "),s("h2",{attrs:{id:"npm-install"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-install","aria-hidden":"true"}},[e._v("#")]),e._v(" npm install")]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("npm i")]),e._v("：安装package.json中所有dependencies和devDependencies")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("npm i --production")]),e._v("：仅安装dependencies")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("npm i [module] [-S/-D] [-g]")]),e._v("：安装指定[module]到此目录下的node_modules，-S/-D表示并记录到package.json，-g表示是否安装到全局")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("npm uninstall [module] [-g]")]),e._v("：卸载指定[module]")])])]),e._v(" "),s("h3",{attrs:{id:"version"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#version","aria-hidden":"true"}},[e._v("#")]),e._v(" version")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("1.2.3")]),e._v("：指定版本1.2.3")]),e._v(" "),s("li",[s("code",[e._v("~1.2.3")]),e._v("：可兼容到1.2.x（默认）")]),e._v(" "),s("li",[s("code",[e._v("^1.2.3")]),e._v("：可兼容到1.x.x")]),e._v(" "),s("li",[s("code",[e._v(">=1.2.3 <1.3.0")]),e._v("：大于等于1.2.3且小于1.3.0")]),e._v(" "),s("li",[s("code",[e._v("<=1.2.3 || >1.3.0")]),e._v("：小于等于1.2.3或者大于1.3.0")])])])},[],!1,null,null,null);a.default=n.exports}}]);