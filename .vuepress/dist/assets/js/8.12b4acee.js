(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{194:function(e,a,s){e.exports=s.p+"assets/img/cas.c566cd85.png"},215:function(e,a,s){"use strict";s.r(a);var t=s(0),r=Object(t.a)({},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#权限","aria-hidden":"true"}},[e._v("#")]),e._v(" 权限")]),e._v(" "),t("h2",{attrs:{id:"oauth2-0"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#oauth2-0","aria-hidden":"true"}},[e._v("#")]),e._v(" OAuth2.0")]),e._v(" "),t("p",[e._v("用户（浏览器端）、客户端（服务端）、第三方服务提供商（提供认证登陆和资源）")]),e._v(" "),t("p",[e._v("授权码模式:")]),e._v(" "),t("ol",[t("li",[e._v("用户进入客户端，选择以第三方登陆，客户端将用户重定向到第三方(带有callback-url参数)。")]),e._v(" "),t("li",[e._v("用户在第三方的页面上输入帐号密码完成登陆，第三方生成授权码，将用户重定向到刚才的callback-url回到客户端，并带上授权码参数。")]),e._v(" "),t("li",[e._v("客户端接收到授权码，在后台向第三方发出请求，包含授权码和自身身份信息，第三方验证通过后，返回访问令牌给客户端。")]),e._v(" "),t("li",[e._v("客户端将访问令牌与用户关联，此后客户端能通过该令牌请求第三方内容，即用户可在客户端上获取/操作自己在第三方的资源。")])]),e._v(" "),t("h2",{attrs:{id:"集中式认证服务（cas）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集中式认证服务（cas）","aria-hidden":"true"}},[e._v("#")]),e._v(" 集中式认证服务（CAS）")]),e._v(" "),t("p",[t("img",{attrs:{src:s(194),alt:"event loop"}})]),e._v(" "),t("ul",[t("li",[t("p",[e._v("当Client没有Server的有效session，也没有CAS的有效session：1 -> 11。")])]),e._v(" "),t("li",[t("p",[e._v("当Client没有Server的有效session，但有CAS的有效session（比如之前登录过Server A，现在要登录Server B，Server A和B共用一套CAS）：1、2、3(带CAS的session)、6（验证session有效，直接生成ticket）、7、8、9、10、11")])]),e._v(" "),t("li",[t("p",[e._v("当Client有Server的有效session：11")])])]),e._v(" "),t("p",[e._v("实际场景中一条链路上可能有多层的Server，可以把此架构中的Client和Server看成整体，作为上层的Client，继续往下层的Server拓展。")]),e._v(" "),t("h2",{attrs:{id:"登陆"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#登陆","aria-hidden":"true"}},[e._v("#")]),e._v(" 登陆")]),e._v(" "),t("p",[e._v("登陆的一种实现：")]),e._v(" "),t("p",[e._v("Client")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("gen randomKey\n\nencodeKey = psw\n\nH(id+randomKey)\n")])])]),t("p",[e._v("Server")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("decodeKey = psw\n\ndecode id + randomKey\n\nencodeKey = randomKey\n\ngen syncKey\n\nH(syncKey)\n")])])]),t("p",[e._v("Client")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("decodeKey = randomKey\n\ndecode syncKey\n")])])]),t("p",[e._v("票据的一种实现：")]),e._v(" "),t("p",[e._v("登陆后，服务端生成票据，传给客户端保存，票据中记录登陆序列。若客户端数据泄露被copy进行登陆，服务端序列增加，下次客户端再次登陆，则因为序列对不上要求客户端输入密码重新登陆，重新生成票据。")])])},[],!1,null,null,null);a.default=r.exports}}]);